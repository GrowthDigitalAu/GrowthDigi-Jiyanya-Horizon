{% comment %}
UNIVERSAL PRODUCT DESCRIPTION CLEANER
- Removes all broken HTML
- Removes inline styles
- Fixes Google/Word garbage
- Extracts clean text only
- Rebuilds as: Heading + Bullet list
- 100% safe, never breaks layout
{% endcomment %}

{%- comment -%}
1) Remove MS Word / Google extra garbage
{%- endcomment -%}
{% assign text = product.description 
  | replace: '_x000D_', ' ' 
  | replace: '\n', ' '
  | replace: '\\n', ' '
  | replace: '\r', ' '
%}

{%- comment -%}
2) Strip ALL HTML completely (VERY IMPORTANT)
{%- endcomment -%}
{% assign text = text | strip_html | strip %}

{%- comment -%}
3) Split description into items using bullet (•)
{%- endcomment -%}
{% assign parts = text | split: '•' %}

<div class="product_discription_new">

  {%- comment -%} 4) First part becomes heading {%- endcomment -%}
  <h3>{{ parts.first | strip }}</h3>

  {%- comment -%} 5) Build clean bullet list {%- endcomment -%}
  <ul>
    {% for item in parts offset: 1 %}
      {% assign cleaned = item | strip %}
      {% if cleaned != '' %}
        <li>{{ cleaned }}</li>
      {% endif %}
    {% endfor %}
  </ul>

</div>
